<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daftar Cerita - LAKON</title>
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link
      href="assets/vendor/glightbox/css/glightbox.min.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
    <link href="assets/css/main.css" rel="stylesheet" />

    <style>
      * {
        font-family: "Roboto", sans-serif;
      }

      body.loading {
        overflow: hidden;
      }

      #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: white;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1050;
      }

      #loader.hidden {
        display: none;
      }

      #main-content {
        opacity: 0;
        transition: opacity 0.6s ease-in-out;
      }

      #main-content.visible {
        opacity: 1;
      }

      .sidebar-container {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 240px;
        background-color: #f4f4f4;
        border-right: 1px solid #ddd;
        padding: 100px 1rem 2rem;
        overflow-y: auto;
      }

      .sidebar-container h5 {
        font-size: 1rem;
        margin-bottom: 0.75rem;
      }

      .form-check {
        margin-bottom: 0.5rem;
      }

      .sticky-search {
        position: sticky;
        top: 0;
        background: #fff;
        z-index: 1030;
        padding: 1rem 0;
        margin-left: 240px;
        border-bottom: 1px solid #ddd;
      }

      .content-area {
        margin-left: 240px;
        padding: 2rem;
        min-height: 100vh;
        background-color: #fafafa;
      }

      .card {
        border: 1px solid #ddd;
        border-radius: 0.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .card-body {
        padding: 1.25rem;
      }

      .badge {
        font-size: 0.85rem;
        padding: 0.4em 0.8em;
      }

      .form-control {
        border-radius: 0.375rem;
      }

      .spinner-border {
        width: 3rem;
        height: 3rem;
        border-width: 0.3em;
      }

      /* Popup konselor fade in/out */
      #konselor-popup {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      #konselor-popup.show {
        opacity: 1;
        pointer-events: auto;
      }

      @media (max-width: 768px) {
        .sidebar-container {
          position: static;
          width: 100%;
          border-right: none;
          padding: 1rem;
        }

        .sticky-search,
        .content-area {
          margin-left: 0;
        }

        .content-area {
          padding: 1rem;
        }
      }
    </style>
  </head>

  <body class="bg-light text-dark loading">
    <div id="loader">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <div class="sidebar-container">
      <div class="mb-4">
        <h5>Filter Wilayah</h5>
        <div class="form-check">
          <input
            class="form-check-input wilayah-checkbox"
            type="checkbox"
            value="PIK Sidomulyo"
            id="sidomulyo"
          />
          <label class="form-check-label" for="sidomulyo">PIK Sidomulyo</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input wilayah-checkbox"
            type="checkbox"
            value="PIK Karanganyar"
            id="karanganyar"
          />
          <label class="form-check-label" for="karanganyar"
            >PIK Karanganyar</label
          >
        </div>
        <div class="form-check">
          <input
            class="form-check-input wilayah-checkbox"
            type="checkbox"
            value="PIK SMAN 1 Pare"
            id="pare"
          />
          <label class="form-check-label" for="pare">PIK SMAN 1 Pare</label>
        </div>
      </div>

      <div>
        <h5>Status</h5>
        <div class="form-check">
          <input
            class="form-check-input status-checkbox"
            type="checkbox"
            value="sudah"
            id="sudah"
          />
          <label class="form-check-label" for="sudah">Sudah Dikomentari</label>
        </div>
        <div class="form-check">
          <input
            class="form-check-input status-checkbox"
            type="checkbox"
            value="belum"
            id="belum"
          />
          <label class="form-check-label" for="belum">Belum Dikomentari</label>
        </div>
      </div>
    </div>

    <main id="main-content">
      <div
        id="konselor-popup"
        class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-flex align-items-center justify-content-center"
        style="z-index: 1055"
      >
        <div
          class="bg-white p-4 rounded shadow text-center"
          style="width: 300px"
        >
          <img
            id="popup-foto-konselor"
            class="rounded-circle mb-3"
            width="100"
            height="100"
            src=""
            alt="Konselor"
          />
          <h5 id="popup-nama-konselor" class="fw-bold mb-3"></h5>
          <a
            id="btn-kunjungi-profile"
            href="#"
            target="_blank"
            class="btn btn-primary w-100 mb-2"
            >Kunjungi Profil</a
          >
          <button
            onclick="document.getElementById('konselor-popup').classList.remove('show')"
            class="btn btn-light w-100"
          >
            Tutup
          </button>
        </div>
      </div>
      <div class="sticky-search">
        <h1 class="text-center fw-bold mb-3">Cerita Pengguna</h1>
        <div class="container px-3">
          <div class="input-group">
            <input
              type="text"
              id="search"
              class="form-control"
              placeholder="Cari berdasarkan nama, wilayah, atau cerita..."
            />
            <button
              id="clear-search"
              class="btn btn-outline-secondary"
              type="button"
            >
              &times;
            </button>
          </div>
        </div>
      </div>

      <div class="content-area">
        <section id="daftar-cerita"></section>
      </div>
    </main>

    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
      function bukaPopupKonselor(nama) {
        const popup = document.getElementById("konselor-popup");
        const foto = document.getElementById("popup-foto-konselor");
        const namaKonselor = document.getElementById("popup-nama-konselor");
        const btnProfile = document.getElementById("btn-kunjungi-profile");

        foto.src = `assets/img/photo/${nama.toLowerCase()}.jpg`;
        namaKonselor.textContent = nama;
        btnProfile.href = `profile/${nama.toLowerCase()}.html`;

        popup.classList.add("show");
      }
    </script>
  </body>
</html>
